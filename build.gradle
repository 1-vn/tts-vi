plugins {
    id 'application'
}

allprojects {
    group 'de.dfki.mary'
    version '6.0-SNAPSHOT'

    repositories {
        jcenter()
    }
}

dependencies {
    runtime project(':marytts-runtime')
    runtime project(':marytts-languages').subprojects
    runtime project(':voice-cmu-slt-hsmm')
}

mainClassName = 'marytts.server.Mary'

run {
    systemProperties << ['mary.base': buildDir]
}

startScripts {
    applicationName = 'marytts-server'
    doLast {
        unixScript.text = unixScript.text.replaceAll('DEFAULT_JVM_OPTS=""', 'DEFAULT_JVM_OPTS="-Dmary.base=\\$APP_HOME"')
        windowsScript.text = windowsScript.text.replaceAll('set DEFAULT_JVM_OPTS=', 'set DEFAULT_JVM_OPTS="-Dmary.base=%APP_HOME%"')
    }
}
